# 🚀 快速开始 - 新增功能指南

## 问题解决总结

您提出的三个主要问题已全部解决：

### ✅ 问题 1: "API 设置出现问题，模型拉取不了"
**解决方案：** 添加了多提供商支持和动态模型拉取功能
- 现在支持 9 个主流 API 提供商
- 每个提供商都有独立的模型列表
- 通过"🔄 拉取"按钮自动获取支持的模型

### ✅ 问题 2: "左/右侧面板收起来就找不着了"  
**解决方案：** 完整实现了面板状态持久化
- 面板收起时自动显示浮动展开按钮
- 面板状态保存在浏览器本地，刷新不丢失
- 面板头部随时可点击收起/展开

### ✅ 问题 3: "想让软件和网页功能一样"
**解决方案：** 在 mindmap.htm 中同步了所有改进
- 完整的 API 多提供商支持
- 动态模型拉取功能
- 面板状态管理
- 所有设置持久化存储

---

## 🎯 如何使用新功能

### 第一步：打开 API 设置

在 MindFlow Pro 中点击右上角的 **⚙️ 设置** 按钮，弹出设置对话框。

### 第二步：选择 API 提供商

在"API 配置"部分，点击"📡 提供商"下拉菜单，选择您要使用的提供商：

```
📡 提供商选择：
├── OpenAI (推荐 - 功能最全)
├── Azure OpenAI (企业用户)
├── Anthropic / Claude (创意工作)
├── 阿里云通义千问 (国内用户)
├── 百度文心一言 (国内用户)
├── DeepSeek (经济选择)
├── Moonshot 月之暗面
├── 智谱 GLM
└── 自定义 (高级用户)
```

### 第三步：填写 API 信息

1. **API 地址**：选择提供商后自动填充，支持手动修改
   - OpenAI: `https://api.openai.com/v1`
   - Azure: `https://your-resource.openai.azure.com/v1`
   - 阿里云: `https://dashscope.aliyuncs.com/api/v1`
   - 等等...

2. **API 密钥**：粘贴您的 API 密钥
   - OpenAI: `sk-...` 开头
   - 阿里云: `sk-...` 格式
   - Anthropic: `sk-ant-...` 开头
   - 其他提供商参考官方文档

### 第四步：拉取可用模型

点击 **🔄 拉取** 按钮，系统自动向您的 API 发送请求，获取该提供商支持的所有模型。

**成功时：**
- 弹出"模型拉取成功"提示
- 模型列表下拉框自动填充可用模型

**失败时：**
- 收到错误提示，检查：
  - API 密钥是否正确
  - API 地址是否正确
  - 网络连接是否正常

### 第五步：选择模型

有两种方式选择模型：

#### 方式 A：从拉取的列表选择（推荐）
- 在"📋 模型列表"下拉框中选择
- 系统自动填充模型名称

#### 方式 B：使用快捷预设
- 点击快捷按钮（如 GPT-4、Claude Opus 等）
- 系统自动配置相应的提供商和模型

#### 方式 C：手动输入
- 在"模型名称"输入框中手动输入
- 适用于特殊或新发布的模型

### 第六步：测试连接（可选）

点击 **🧪 测试** 按钮验证 API 配置是否正确。

### 第七步：保存配置

点击 **💾 保存** 按钮，配置会自动保存到浏览器本地。

---

## 🎨 面板操作指南

### 面板收起/展开

#### 方式 1：面板头部按钮
- 每个侧边栏顶部都有收起按钮（◀ 或 ▶）
- 点击即可收起该面板

#### 方式 2：侧边浮动按钮
- 当面板收起时，侧边会显示浮动的展开按钮
- 左侧显示📋（大纲）按钮
- 右侧显示🎨（样式）按钮
- 点击即可快速展开

#### 方式 3：键盘快捷键（待实现）
- Ctrl + L：切换左侧面板
- Ctrl + R：切换右侧面板

### 面板状态保存

- 您收起/展开面板的状态会自动保存
- 刷新页面或关闭重开浏览器，面板状态不会改变
- 清除浏览器缓存会重置所有状态

---

## 📱 响应式布局

MindFlow Pro 在不同屏幕尺寸下自动调整：

### 桌面版（1440px+）
- 左侧大纲面板（260px）
- 中央编辑区（可收放）
- 右侧样式面板（260px）
- 底部迷你地图（可选）

### 笔记本电脑（1024px）
- 面板宽度自动缩小到 220px
- 保持全部面板可见

### 平板/小屏幕（768px）
- 建议收起侧边栏获得更大的编辑区
- 使用浮动展开按钮快速访问

---

## 🔒 安全建议

### ⚠️ 重要安全提示

1. **不要在公共电脑上保存密钥**
   - 本应用在浏览器 localStorage 中保存配置
   - 清除浏览器数据会删除配置

2. **定期更新 API 密钥**
   - 如果密钥泄露，立即在提供商后台轮换
   - 本应用支持一键清除所有配置

3. **使用限额控制**
   - 在各提供商后台设置月度限额
   - 防止意外超支

4. **检查 API 使用情况**
   - 定期登录提供商后台查看使用统计
   - 及时发现异常使用

### 清除配置

点击**🗑️ 清除配置**按钮可一键删除所有保存的 API 信息。

---

## 💡 常见问题解答

### Q: 为什么拉取模型时出错？
**A:** 常见原因：
- API 密钥格式不对（检查是否复制完整）
- API 地址不对（某些提供商地址会变）
- 网络问题（检查代理/VPN）
- API 额度用尽（检查账户余额）

### Q: 为什么找不到我的面板？
**A:** 面板已收起。请：
- 查看屏幕两侧是否有浮动按钮（📋 或 🎨）
- 点击浮动按钮展开
- 如果看不到，清除浏览器 localStorage

### Q: 支持离线使用吗？
**A:** 
- 编辑思维导图功能支持离线
- AI 生成功能需要网络和有效的 API 密钥
- 所有配置都保存在本地，没有云同步

### Q: 能否使用多个 API 账户？
**A:** 目前支持一个活跃配置。轮换方式：
- 进入设置修改 API 密钥
- 点击"拉取"获取新提供商的模型列表
- 保存切换到新账户

### Q: 数据会被保存到服务器吗？
**A:** 不会。所有数据都在您的浏览器本地：
- 思维导图内容
- API 配置和密钥
- 使用历史

---

## 🚀 高级用法

### 使用自定义 API 端点

如果您有自己的 API 服务器：

1. 选择提供商："自定义"
2. 输入您的 API 端点 URL
3. 输入相应的密钥/令牌
4. 点击"拉取"测试连接

### 对接企业 API

对于 Azure OpenAI 等企业服务：

1. 选择"Azure"
2. 输入您的资源 URL（如 `https://my-resource.openai.azure.com`）
3. 输入 API 密钥
4. 拉取模型列表

### 批量导出/导入

虽然目前不支持导出配置，但您可以：
- 记下您使用的提供商、地址和模型名称
- 在需要时快速重新配置

---

## 📞 获取帮助

### 检查浏览器控制台

遇到问题时，打开浏览器开发者工具（F12）：

1. 点击"控制台"标签
2. 查看是否有红色错误信息
3. 将错误信息记下来（有助于排查)

### 常用的调试命令

```javascript
// 查看保存的配置
console.log(JSON.parse(localStorage.getItem('mindmap_api_config')))

// 清除所有配置
localStorage.clear()

// 查看面板状态
console.log(localStorage.getItem('mindmap_left_panel_state'))
console.log(localStorage.getItem('mindmap_right_panel_state'))
```

---

## 🎓 最佳实践

### 工作流建议

1. **首次使用**
   - 选择您熟悉的 API 提供商
   - 配置并拉取模型列表
   - 点击"测试"验证
   - 保存配置

2. **日常工作**
   - 通过快捷预设快速切换模型
   - 使用 AI 助力功能增强思维导图
   - 定期导出备份您的思维导图

3. **切换提供商**
   - 进入设置选择新提供商
   - 拉取新的模型列表
   - 测试后保存

### 性能优化

- 大型思维导图（500+ 节点）：收起侧边栏获得更好性能
- 频繁 AI 调用：使用快速推理模型（如 gpt-3.5）节省成本
- 网络慢：减少自动保存频率，使用"手动保存"

---

**版本**: MindFlow Pro v2.1  
**最后更新**: 2024年  
**反馈渠道**: 欢迎提出建议和问题
