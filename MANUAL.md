# MindFlow Pro 用户手册

**版本：** 1.0.0  
**更新日期：** 2025年12月30日  
**语言：** 简体中文

---

## 目录

1. [快速开始](#快速开始)
2. [界面介绍](#界面介绍)
3. [基础操作](#基础操作)
4. [高级功能](#高级功能)
5. [AI功能](#ai功能)
6. [快捷键](#快捷键)
7. [导入导出](#导入导出)
8. [主题系统](#主题系统)
9. [设置与配置](#设置与配置)
10. [常见问题](#常见问题)
11. [故障排除](#故障排除)

---

## 快速开始

### 安装方式

#### 方式一：网页版（推荐新手）

1. 直接在浏览器中打开 `mindmap.htm`
2. 无需安装，即开即用
3. 所有数据本地保存在浏览器

**兼容浏览器：** Chrome、Firefox、Safari、Edge（最新版本）

#### 方式二：完整版（推荐开发者）

```bash
# 1. 克隆或解压项目
cd e:\mindmap-pro

# 2. 安装依赖
npm install

# 3. 启动服务器
npm start

# 4. 在浏览器打开
# http://localhost:3000
```

#### 方式三：开发模式（自动重启）

```bash
npm run dev
```

---

## 界面介绍

### 顶部工具栏

```
┌─────────────────────────────────────────────────────────────┐
│ 🧠 MindFlow Pro │ 新建 保存 打开 │ ↩️  ↪️ │ ➕ ↔️ 🗑️ │...│
└─────────────────────────────────────────────────────────────┘
```

| 区域 | 功能 | 说明 |
|------|------|------|
| **品牌区** | Logo + 标题 | 点击返回主菜单 |
| **文件操作** | 新建、保存、打开 | 思维导图文件管理 |
| **编辑操作** | 撤销、重做 | 步进式撤销/重做 |
| **节点操作** | 添加、删除 | 快速节点管理 |
| **AI功能** | AI生成、分析 | 智能功能 |
| **主题选择** | 6种主题 | 即时切换风格 |
| **视图控制** | 缩放、适应 | 画布视图调整 |
| **导出** | 多格式导出 | 图片/数据导出 |

### 左侧工作区

```
┌────────────────┐
│   节点属性面板  │
├────────────────┤
│ 样式设置       │
│ ├─ 背景色      │
│ ├─ 文字色      │
│ ├─ 字体大小    │
│ └─ 节点形状    │
│                │
│ 内容编辑       │
│ ├─ 节点文本    │
│ ├─ 备注        │
│ └─ 链接        │
└────────────────┘
```

### 中央画布

- 放置思维导图的主要区域
- 支持缩放和平移
- 显示所有节点和连接线

### 右下角小地图

- 显示整体思维导图缩略图
- 红色框指示当前视口
- 点击可快速导航

---

## 基础操作

### 创建新思维导图

**方式一：使用菜单**
1. 点击工具栏中的 "新建" 按钮
2. 输入主题名称
3. 点击 "创建"

**方式二：快捷键**
```
Ctrl + N 创建新思维导图
```

### 编辑节点文本

**方式一：双击编辑**
1. 双击要编辑的节点
2. 输入新文本
3. 按 Enter 或点击空白处确认

**方式二：右键菜单**
1. 右键点击节点
2. 选择 "编辑"
3. 输入文本后确认

### 添加子节点

**方式一：工具栏按钮**
1. 选中父节点
2. 点击工具栏 "➕ 子节点" 按钮

**方式二：快捷键（最快）**
```
选中节点后按 Tab 键
```

**方式三：右键菜单**
```
右键 → 添加子节点
```

### 添加同级节点

**方式一：工具栏**
1. 选中任意节点
2. 点击工具栏 "↔️ 同级" 按钮

**方式二：快捷键**
```
选中节点后按 Enter 键
```

### 删除节点

**方式一：工具栏**
1. 选中要删除的节点
2. 点击工具栏 "🗑️ 删除" 按钮

**方式二：快捷键**
```
选中节点后按 Delete 键
```

**警告：** 删除节点会同时删除其所有子节点，且无法撤销后重做！

### 移动和拖拽

**单节点移动**
1. 点击并按住节点
2. 拖动到新位置
3. 释放鼠标

**画布平移**
1. 按住 **中键** 或 **空格** 键
2. 拖动鼠标移动画布
3. 释放

### 选择节点

**单选**
```
左键点击节点
```

**多选**
```
Ctrl + 左键 点击多个节点
```

**取消选择**
```
点击空白区域
或按 Escape 键
```

---

## 高级功能

### 撤销和重做

思维导图支持完整的历史记录管理。

**撤销操作**
```
Ctrl + Z    或    点击工具栏 ↩️ 按钮
```

**重做操作**
```
Ctrl + Y    或    点击工具栏 ↪️ 按钮
```

**历史记录限制：** 最多保存 100 步操作

### 节点样式编辑

#### 背景颜色

1. 选中节点
2. 在左侧面板找到 "背景色" 选项
3. 点击色块打开颜色选择器
4. 选择颜色（支持 16 万种颜色）

#### 文字颜色

1. 选中节点
2. 在左侧面板找到 "文字色" 选项
3. 选择合适的颜色

#### 字体大小

1. 选中节点
2. 在左侧面板找到 "字体大小"
3. 使用滑块调整（12px - 32px）

#### 节点形状

1. 选中节点
2. 选择形状：
   - **圆角矩形**（推荐）
   - **方形**
   - **圆形**
   - **菱形**

### 折叠和展开

**折叠节点（隐藏子节点）**
```
点击节点左上角的 - 按钮
```

**展开节点（显示子节点）**
```
点击节点左上角的 + 按钮
```

**一键全部展开**
```
Ctrl + E 展开所有
```

**一键全部折叠**
```
Ctrl + Shift + E 折叠所有
```

### 节点附加信息

#### 添加备注

1. 选中节点
2. 在左侧面板的 "备注" 框输入
3. 自动保存

#### 添加超链接

1. 选中节点
2. 在左侧面板的 "链接" 框输入 URL
3. 例：`https://example.com`

#### 添加图标/标签

1. 选中节点
2. 从图标库中选择
3. 支持 Emoji 和常见图标

---

## AI功能

### 前置条件

AI功能需要配置 OpenAI API 密钥。

**获取 API 密钥：**
1. 访问 https://platform.openai.com/api-keys
2. 创建新的 API 密钥
3. 复制密钥

**配置密钥：**

**方式一：环境变量**
编辑 `.env` 文件：
```dotenv
OPENAI_API_KEY=sk-your-key-here
OPENAI_MODEL=gpt-4
```

**方式二：应用内配置**
1. 点击工具栏中的 "⚙️" 设置按钮
2. 找到 "API 配置" 部分
3. 输入密钥并保存

### AI 主题生成

根据一个主题自动生成完整的思维导图结构。

**使用方法：**
1. 点击工具栏 "🤖 AI生成" 按钮
2. 在弹窗中输入主题（如 "项目管理"）
3. 选择生成选项：
   - **深度**：1-5 级（默认 3 级）
   - **节点数量**：最多数量（默认 20）
   - **模板**：选择结构风格
4. 点击 "生成" 开始

**示例：**
```
输入：市场营销
生成结构：
├─ 市场分析
├─ 产品策略
├─ 宣传推广
├─ 销售渠道
└─ 效果评估
```

### AI 文本分析

分析长文本，自动提取结构和要点。

**使用方法：**
1. 点击工具栏 "📊 分析" 按钮
2. 在文本框中粘贴要分析的文本
3. 选择分析模式：
   - **要点提取**：提取核心观点
   - **结构分析**：分析文本逻辑结构
   - **概念图**：构建概念关系网
4. 点击 "分析" 开始

**文本限制：** 最多 4000 个 Token（约 3000 个中文字符）

### AI 节点扩展

对选中的节点，AI 自动生成相关的子节点。

**使用方法：**
1. 选中一个节点
2. 右键菜单 → "AI 扩展"
3. 选择扩展类型：
   - **相关概念**
   - **实现方案**
   - **风险分析**
   - **成本预算**
4. 点击 "扩展" 生成

### 离线模式

如果没有配置 API 密钥，AI 功能会自动使用本地模式：

- **本地文本分析**：统计字数、分析关键词
- **简单生成**：使用预设模板生成基础结构

---

## 快捷键

### 文件操作

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + N` | 新建思维导图 |
| `Ctrl + O` | 打开文件 |
| `Ctrl + S` | 保存思维导图 |
| `Ctrl + Shift + S` | 另存为... |
| `Ctrl + P` | 打印 |
| `Ctrl + Q` | 退出应用 |

### 编辑操作

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + Z` | 撤销 |
| `Ctrl + Y` | 重做 |
| `Ctrl + X` | 剪切 |
| `Ctrl + C` | 复制 |
| `Ctrl + V` | 粘贴 |
| `Delete` | 删除选中节点 |

### 节点操作

| 快捷键 | 功能 |
|--------|------|
| `Tab` | 添加子节点 |
| `Enter` | 添加同级节点 |
| `Space` | 展开/折叠节点 |
| `Ctrl + E` | 全部展开 |
| `Ctrl + Shift + E` | 全部折叠 |
| `F2` | 编辑节点文本 |

### 视图操作

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + 0` | 重置缩放（100%） |
| `Ctrl + +` | 放大（+10%） |
| `Ctrl + -` | 缩小（-10%） |
| `Ctrl + 1` | 适应屏幕 |
| `Space + 拖拽` | 平移画布 |
| `鼠标滚轮` | 缩放画布 |

### AI 操作

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + G` | AI 生成 |
| `Ctrl + Shift + A` | AI 分析 |
| `Alt + A` | AI 节点扩展 |

---

## 导入导出

### 支持的格式

| 格式 | 导出 | 导入 | 说明 |
|------|------|------|------|
| **JSON** | ✅ | ✅ | 完整保留所有信息 |
| **PNG** | ✅ | ❌ | 高质量图片 |
| **JPG** | ✅ | ❌ | 压缩图片 |
| **Markdown** | ✅ | ✅ | 层级文本格式 |
| **纯文本** | ✅ | ✅ | 简单文本大纲 |
| **XMind** | 🔄 | 🔄 | 规划中 |
| **PDF** | 🔄 | ❌ | 规划中 |

### 导出思维导图

**步骤：**
1. 在菜单中选择 "📤 导出"
2. 选择目标格式
3. 确认导出配置
4. 下载文件

**导出 PNG 配置：**
- 分辨率：1920x1440 (默认)
- 背景：白色
- 水印：可选

**导出 JSON 配置：**
- 包含完整样式
- 包含历史记录（可选）
- 压缩（可选）

### 导入思维导图

**步骤：**
1. 点击 "📂 打开" 按钮
2. 选择要导入的文件
3. 系统自动识别格式
4. 加载完成后自动居中显示

**支持的文件：**
- `.json` - 自产导出的数据
- `.md` - Markdown 文件
- `.txt` - 纯文本大纲
- `.mm` - FreeMind 格式

---

## 主题系统

### 内置主题

#### 1. 商务蓝 (Business Blue)

```
主色：#4ECDC4
副色：#2C3E50
线条：#666
特点：专业、正式、高端
适用：商务报告、方案设计
```

#### 2. 清新绿 (Fresh Green)

```
主色：#2ECC71
副色：#27AE60
线条：#27AE60
特点：清爽、活力、自然
适用：学习笔记、创意头脑风暴
```

#### 3. 暗黑模式 (Dark Mode)

```
主色：#34495E
副色：#2C3E50
背景：#1A1A1A
特点：护眼、酷炫、低调
适用：夜间工作、代码相关
```

#### 4. 多彩主题 (Colorful)

```
根节点：#FF6B6B（红）
一级：#4ECDC4（青）
二级：#45B7D1（蓝）
三级：#FFA07A（橙）
特点：活泼、多色、易区分
适用：教育、创意、展示
```

#### 5. 极简白 (Minimal White)

```
主色：#FFFFFF
副色：#F5F5F5
线条：#999
特点：极简、纯净、清晰
适用：打印、演示、学术
```

#### 6. 学术风 (Academic)

```
主色：#2C3E50
副色：#34495E
强调：#E74C3C
特点：严谨、学术、传统
适用：论文、研究、学位论文
```

### 自定义主题

**创建自定义主题：**
1. 进入 "⚙️ 设置" → "主题编辑"
2. 点击 "新建主题"
3. 自定义以下参数：

| 参数 | 说明 |
|------|------|
| 主题名称 | 自定义名称 |
| 根节点颜色 | RGB/Hex 色码 |
| 一级节点颜色 | 颜色值 |
| 二级节点颜色 | 颜色值 |
| 线条颜色 | 连接线颜色 |
| 背景颜色 | 画布背景 |
| 文字颜色 | 默认文字色 |

4. 点击 "保存" 完成

---

## 设置与配置

### 打开设置面板

**方式一：** 工具栏 "⚙️" 按钮  
**方式二：** 快捷键 `Ctrl + ,`

### 基础设置

#### 显示选项

- [ ] 显示小地图（右下角导航图）
- [ ] 显示网格
- [ ] 显示标尺
- [ ] 显示节点编号
- [x] 显示动画效果（默认开启）

#### 行为选项

- [x] 自动保存（默认 3 分钟）
- [ ] 自动恢复提示
- [x] 启用声音反馈
- [x] 启用触觉反馈（移动设备）

#### 默认样式

- 节点字体：宋体 / Arial（系统选择）
- 字体大小：14px
- 节点宽度：120px
- 节点间距：80px

### API 配置

#### OpenAI 设置

```
API 密钥：[sk-......................................]
API 地址：https://api.openai.com/v1
模型选择：gpt-4 / gpt-3.5-turbo / gpt-4-turbo
最大 Token：4000
```

#### 国内代理配置

如在国内无法访问 OpenAI，可配置代理：

```
代理地址：https://api.openai-proxy.com/v1
API 密钥：[与 OpenAI 相同]
```

### 数据备份

#### 自动备份

- 备份频率：每 10 分钟
- 备份位置：Browser IndexedDB
- 最大备份数：10 个

#### 手动备份

1. 点击 "数据管理" 选项卡
2. 点击 "导出全部数据"
3. 选择备份格式
4. 下载 `.backup` 文件

#### 恢复备份

1. 点击 "数据管理" 选项卡
2. 点击 "导入备份"
3. 选择 `.backup` 文件
4. 确认恢复

---

## 常见问题

### Q1: 文件保存在哪里？

**A:** 有三种存储位置：

1. **浏览器本地**（默认）
   - 存储位置：Browser LocalStorage
   - 大小限制：5-10MB
   - 清除浏览器数据会丢失

2. **本地计算机**
   - 需下载导出为文件
   - 推荐定期导出备份

3. **云端存储**（规划中）
   - 将支持云同步

### Q2: 如何避免数据丢失？

**建议方案：**

```
1. 启用自动保存（每 3 分钟保存一次）
2. 定期导出为 JSON（每周）
3. 清除浏览器数据前先备份
4. 使用多个浏览器同时打开
```

### Q3: AI功能一直说"未配置API"？

**检查清单：**

- [ ] OpenAI 账户已创建
- [ ] API 密钥已获取
- [ ] `.env` 文件已配置（如使用服务器版）
- [ ] API 密钥有效且有额度
- [ ] 网络连接正常
- [ ] 防火墙未阻止

**测试 API：**
```
进入设置 → API 配置 → 测试连接
```

### Q4: 支持多人协作吗？

**目前：** ❌ 不支持（单人离线模式）

**规划中：**
- 版本 1.5：实时协作编辑
- 版本 2.0：云端团队协作

**当前替代方案：**
- 导出为 JSON 格式
- 共享文件，轮流编辑
- 使用版本控制工具

### Q5: 可以导入其他思维导图工具的文件吗？

**支持的导入：**
- ✅ FreeMind (`.mm`)
- ✅ Markdown 格式
- ✅ 纯文本大纲

**规划中：**
- 🔄 XMind 格式
- 🔄 Lucidchart
- 🔄 Miro

### Q6: 节点数量有限制吗？

**性能建议：**

| 节点数 | 性能 | 建议 |
|--------|------|------|
| < 100 | 最优 | 无限制 |
| 100-500 | 良好 | 折叠部分节点 |
| 500-1000 | 可接受 | 使用多个文件 |
| > 1000 | 可能卡顿 | 分割思维导图 |

### Q7: 如何分享思维导图？

**方式一：导出图片**
```
导出 → PNG/JPG → 分享
```

**方式二：共享链接**（规划中）
```
生成公开链接 → 分享给他人
```

**方式三：嵌入网页**（规划中）
```
获取嵌入代码 → 放入网站
```

### Q8: 快捷键失效怎么办？

**原因和解决：**

| 原因 | 解决方案 |
|------|---------|
| 输入框有焦点 | 按 Esc 退出输入 |
| 浏览器快捷键冲突 | 改用菜单操作 |
| 浏览器扩展干扰 | 禁用可疑扩展 |

---

## 故障排除

### 问题 1: 应用无法启动

**症状：** 打开页面一片空白或显示错误信息

**排查步骤：**
1. 检查浏览器版本（需 Chrome 90+ 或等效）
2. 清除浏览器缓存：`Ctrl + Shift + Del`
3. 禁用浏览器扩展（在隐私标签页测试）
4. 检查浏览器控制台（F12）的错误信息

**解决方案：**
```
如果使用服务器版本：
npm install
npm start

如果使用网页版本：
重新打开 mindmap.htm 文件
或尝试使用不同浏览器
```

### 问题 2: 数据突然丢失

**可能原因：**
- 浏览器缓存被清除
- 超过存储限额 (5-10MB)
- 浏览器崩溃
- IndexedDB 损坏

**恢复方案：**
```
1. 检查浏览器是否有自动恢复提示
2. 打开浏览器历史记录，查找旧的会话
3. 导入之前的备份文件（`.backup` 或 `.json`）
4. 从云备份恢复（如已配置）
```

### 问题 3: AI 功能出错

**常见错误：**

| 错误信息 | 原因 | 解决 |
|---------|------|------|
| "API 密钥无效" | 密钥错误或过期 | 重新生成并配置密钥 |
| "超出速率限制" | 请求过于频繁 | 等待几分钟后重试 |
| "网络错误" | 网络不通或代理问题 | 检查网络，配置代理 |
| "Token 不足" | 文本过长 | 缩短输入文本 |

### 问题 4: 性能缓慢

**症状：** 拖拽节点卡顿，输入延迟，渲染慢

**优化步骤：**
1. 折叠大分支节点（减少渲染）
2. 禁用动画效果：设置 → 关闭动画
3. 关闭小地图：设置 → 隐藏小地图
4. 减少节点数量：将大文件分割
5. 重启浏览器清空内存

### 问题 5: 导出文件损坏

**症状：** 导出的 JSON 无法导入，图片打不开

**解决方案：**
```
JSON 导出：
1. 检查文件编码（应为 UTF-8）
2. 验证 JSON 格式：https://jsonlint.com
3. 尝试用文本编辑器修复

图片导出：
1. 尝试更换导出格式（PNG → JPG）
2. 调整导出分辨率
3. 更新浏览器版本
```

### 获取技术支持

**问题提交：**
- 📧 Email: support@mindflow-pro.com
- 🐛 Issue: https://github.com/yourname/mindmap-pro/issues
- 💬 论坛: https://community.mindflow-pro.com

**提供信息：**
- 浏览器版本和操作系统
- 复现步骤（越详细越好）
- 错误截图或控制台信息
- 相关文件（如出错的 `.json` 文件）

---

## 高级技巧

### 批量编辑节点

```
1. 多选多个节点（Ctrl + 点击）
2. 在右侧面板选择样式
3. 一次性应用到所有选中节点
```

### 搜索和替换

```
Ctrl + F   打开搜索框
Ctrl + H   打开替换框
```

### 快速复制结构

```
1. 右键点击节点
2. 选择 "复制" → 复制整个子树
3. 在其他位置 "粘贴"（复制完整结构）
```

### 导出为演示

```
导出 → PNG → 使用幻灯片软件排列
或
导出 → Markdown → 转 PDF 演示
```

---

## 系统要求

### 浏览器要求

| 浏览器 | 最低版本 | 推荐版本 |
|--------|---------|----------|
| Chrome | 90 | 最新版 |
| Firefox | 88 | 最新版 |
| Safari | 14 | 最新版 |
| Edge | 90 | 最新版 |

### 操作系统要求

- Windows 7 及以上
- macOS 10.12 及以上
- Linux（主流发行版）

### 硬件要求

- RAM：2GB 最低，4GB 推荐
- 显存：1GB（集成显卡即可）
- 磁盘：50MB（安装文件）+ 100MB（数据）

---

## 版本历史

### v1.0.0 (2025-12-30) - 首次发布

✨ 首个稳定版本

**功能：**
- 完整的思维导图编辑器
- 6 种内置主题
- AI 智能生成/分析
- 多格式导入导出
- 撤销/重做历史
- 自动保存和备份

**修复：**
- 修复 TextAnalyzer 中的保留字冲突
- 修复 app.js 错误处理
- 优化性能和内存使用

**已知限制：**
- 暂不支持多人协作
- 导出 PDF 功能规划中
- 云存储功能规划中

---

## 许可证和致谢

**开源协议：** MIT

**感谢：**
- OpenAI 提供 AI 支持
- 开源社区的贡献

---

## 反馈和建议

我们非常欢迎您的反馈和建议！

**反馈方式：**
1. 📧 电子邮件：feedback@mindflow-pro.com
2. 🐛 Bug 报告：GitHub Issues
3. 💡 功能建议：GitHub Discussions
4. 💬 社区讨论：论坛

**如何写好反馈：**
- 清楚描述问题或需求
- 提供复现步骤（如适用）
- 包含截图或日志
- 告知您的浏览器和操作系统

---

## 更新日志

**近期更新计划：**

- [ ] v1.1.0 - 性能优化和 Bug 修复
- [ ] v1.2.0 - 更多导入格式支持
- [ ] v1.5.0 - 实时协作编辑
- [ ] v2.0.0 - 云端团队协作

---

**最后更新：** 2025年12月30日  
**维护者：** MindFlow Pro Team  
**官方网站：** https://mindflow-pro.com

